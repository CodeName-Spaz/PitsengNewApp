<ion-header id="web">
  <ion-toolbar>
    <div class="navigation-bar-upper-section" >
      <div class="logo" (click)='goHome()'>
        <img src="../../../assets/Group 235.png" alt="">
      </div>
      
    </div>
   
      
    
    <ion-buttons slot="end">
      <ion-searchbar (keyup)='searchProducts($event)' (ionClear)="clearSearch($event)"></ion-searchbar>
      <ion-button class="notification" (click)="reviewed()">
        <ion-icon slot="icon-only" name="heart"></ion-icon>
        <span class="badge"></span>
      </ion-button>

      <ion-button class="notification" (click)="getCart()">
        <ion-icon slot="icon-only" name="basket"></ion-icon>
        <span class="badge"></span>
      </ion-button>
      <ion-button color="secondary" (click)="gotoProfile()">
        <ion-icon slot="icon-only" name="person"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
  <div class="toolbar" color="primary">
    <div class="navbar">
      <ion-button fill="clear" color="light" (click)="getProductsbyCategory('Deco')">Deco</ion-button>
      <ion-button fill="clear" color="light" (click)="getProductsbyCategory('Pottery')">Pottery</ion-button>
      <ion-button fill="clear" color="light" (click)="getProductsbyCategory('Vases')">Vases</ion-button>
      <ion-button fill="clear" color="light" (click)="getProductsbyCategory('Lamps')">Lamps</ion-button>
      <ion-button fill="clear" color="light" (click)="getProductonSale()">Sales & Promos</ion-button>
    </div>
  </div>
</ion-header>

<div class="top-nav">
  <div class="nav-grid">
    <div (click)="goHome()">
      <ion-icon name="home"></ion-icon>
    </div>
    <!-- <div>{{productName}}</div> -->
    <div></div>
    <ion-button fill="clear" class="notification" (click)="visitWish()">
      <ion-icon slot="icon-only" name="heart"></ion-icon>
      <span class="badge"></span>
    </ion-button>

    <ion-button fill="clear" class="notification" (click)="visitCart()">
      <ion-icon slot="icon-only" name="basket"></ion-icon>
      <span class="badge"></span>
    </ion-button>

    <div (click)="showMenu()">
      <ion-icon name="{{menuBtn}}"></ion-icon>
    </div>

  </div>
  <div id="options">
    <div class="menu-item" *ngIf="menuOpen == true">
      <div routerLink="/home">HOME</div>
      <div (click)="visitProfile()">PROFILE</div>
      <div (click)="createFaqs()">FAQS</div>
      <div (click)="openAboutUS()">ABOUT</div>
    </div>
  </div>
</div>

<div [ngClass]="{'loader': loaderAnimate, 'loader-hide': !loaderAnimate}">

  <div class="loader">
    <img src="../../assets/pottery-clipart-clay-13.gif" alt="">
    <svg width="200" height="200" viewBox="0 0 100 100">
      <polyline class="line-cornered stroke-still" points="0,0 100,0 100,100" stroke-width="10" fill="none"></polyline>
      <polyline class="line-cornered stroke-still" points="0,0 0,100 100,100" stroke-width="10" fill="none"></polyline>
      <polyline class="line-cornered stroke-animation" points="0,0 100,0 100,100" stroke-width="10" fill="none">
      </polyline>
      <polyline class="line-cornered stroke-animation" points="0,0 0,100 100,100" stroke-width="10" fill="none">
      </polyline>
    </svg>
  </div>
</div>

<ion-content>
  <div class="container" *ngIf="searchedItems.length===0 || searchtxt===''">

    <div class="title">
      <h2>Explore</h2>
    </div>

    <div class="nav">

      <div class="icon">
        <ion-button (click)="getProductsbyCategory('Lamps')" color="transparent">
          <img src="../../assets/lamp.svg" alt="">
        </ion-button>

      </div>

      <div class="icon">
        <ion-button (click)="getProductsbyCategory('Deco')" color="transparent">
          <img src="../../assets/frame.svg" alt="">
        </ion-button>

      </div>
      <div class="icon">
        <ion-button (click)="getProductsbyCategory('Vases')" color="transparent">
          <img src="../../assets/vases.svg" alt="">
        </ion-button>

      </div>


      <div class="icon">
        <ion-button (click)="getProductsbyCategory('Pottery')" color="transparent">
          <img src="../../assets/pot.svg" alt="">
        </ion-button>
      </div>

      <div class="icon">
        <ion-button (click)="getProductonSale()" color="transparent">
          <img src="../../assets/icons8-discount-50.png" alt="">
        </ion-button>
      </div>
    </div>

    <div class="info">
      <p>{{myProduct.length}} Products</p>
    </div>
    <!-- Skeleton Text -->
    <div class="cards" *ngIf="myProduct.length===0">
      <!-- <div id="card" *ngIf="myProduct.length===0">
        <div class="image">
          <ion-thumbnail>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
          </ion-thumbnail>

        </div>
        <div class="text" id="thumbnail">
          <p>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text> <br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span><br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span>
          </p>

        </div>
      </div> -->

      <!-- <div id="card" *ngIf="myProduct.length===0">
        <div class="image">
          <ion-thumbnail>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
          </ion-thumbnail>

        </div>
        <div class="text" id="thumbnail">
          <p>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text> <br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span><br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span>
          </p>

        </div>
      </div> -->
      <div *ngIf="myProduct.length===0">
        <ion-card>
          <ion-card-header>
            <!-- <ion-card-subtitle></ion-card-subtitle> -->
            <ion-card-title>No item found</ion-card-title>
          </ion-card-header>
        
          <ion-card-content>
            Keep shopping with us, by checking other products
          </ion-card-content>
        </ion-card>
      </div>

      <!-- <div id="card" *ngIf="myProduct.length===0">
        <div class="image">
          <ion-thumbnail>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
          </ion-thumbnail>

        </div>
        <div class="text" id="thumbnail">
          <p>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text> <br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span><br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span>
          </p>

        </div>
      </div> -->

      <!-- <div id="card" *ngIf="myProduct.length===0">
        <div class="image">
          <ion-thumbnail>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
          </ion-thumbnail>

        </div>
        <div class="text" id="thumbnail">
          <p>
            <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text> <br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span><br>
            <span>
              <ion-skeleton-text animated style="width: 100%"></ion-skeleton-text>
            </span>
          </p>

        </div>
      </div> -->


    </div>
    <!-- End of skeleton text -->
    <!-- Actual Cards -->
    <div class="cards">
      <div id="card" *ngFor="let p of myProduct" (click)="viewProduct(p)">

        <div class="image">
          <img src="{{p.data.image}}" alt="">
        </div>
        <div class="text">
          <p *ngIf="p.data.onSale"> {{p.data.name}} <br>
            <span style="text-decoration: line-through;color: red "> {{ p.data.price | currency:"R"}} </span>
            <span>{{ p.data.salePrice | currency:"R"}}</span></p>

          <p *ngIf="!p.data.onSale"> {{p.data.name}} <br>
            <span>{{p.data.price | currency:"R"}}</span> <br>
            <span class="starz">
              <ion-icon [name]="p.data.avgRating>1 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>2 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>3 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>4 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>5 ? 'star' : 'star-outline'"></ion-icon>
            </span>
          </p>

        </div>
      </div>
    </div>

  </div>
  <div class="backdrop1" *ngIf="viewBackdrop"></div>
  <!-- Cart/Bag - Side Menu -->
  <div id="cart" [ngClass]="{'viewcart': viewCart, 'closecart': !viewCart}">

    <div class="heading">
      <p>Your Cart</p>

      <ion-icon slot="icon-only" name="close" (click)="getCart()"></ion-icon>

    </div>


    <div class="wishlist_items">
      <div class="div">


        <div class="items" *ngFor="let cp of prodCart; let i of index">
          <div class="left" *ngFor="let prod of cp.data.product">
            <div class="img">
              <img src="{{prod.picture}}" alt="">
            </div>

            <div class="item_details">
              <p> <b>{{prod.product_name}} <br> {{prod.cost | currency:"R"}}</b><br>
                <span>size: {{prod.size}}</span><br>
              </p>

              <div class="add_buttons">
                <p>QTY: {{prod.quantity}}</p>
                <div class="clicks">
                  <ion-button (click)="plus(prod, i)" color="transparent" class="adds">
                    <span>
                      <ion-icon slot="start" name="add"></ion-icon>
                    </span>
                  </ion-button>
                  <ion-button (click)="minus(prod, i)" color="transparent" class="adds1">
                    <span>
                      <ion-icon slot="start" name="remove"></ion-icon>
                    </span>
                  </ion-button>
                </div>

                <!-- <ion-icon slot="start" name="remove-circle-outline"></ion-icon>
                3 <ion-icon slot="end" name="add-circle-outline"></ion-icon> -->
              </div>

            </div>
          </div>

          <div class="right">
            <div class="trash_icon" (click)="removeProd(cp.id)">
              <ion-icon slot="start" name="trash"></ion-icon>
            </div>


          </div>
        </div>

        <!-- <div class="items" id="noItems" *ngIf="prodCart.length === 0">
          <p>Basket Empty</p>
          <img src="../../assets/empty-cart.svg" alt="">
        </div> -->


        <div class="add_to_basket">
          <p style="width: 100%; text-align: left; font-size: 13px; color: rgb(129, 35, 1)">Shipping Methods</p>
          <div class="delivery_options">
            <ion-button (click)="switchView('d')" color="transparent" id="del"
              [ngClass]="{'delivery':buttonActive, 'delivery-inactive': !buttonActive}">
              DELIVERY
            </ion-button>
            <ion-button (click)="switchView('c')" color="transparent" id="col"
              [ngClass]="{'collection': !buttonActive, 'collection-inactive': buttonActive}">
              COLLECTION
            </ion-button>
          </div>

          <p style="width: 100%; text-align: right; font-size: 13px; color: rgb(129, 35, 1)">
            <i>Please Note: Delivery will take up to four days
            </i></p>

          <p style="width: 100%; text-align: right; font-size: 13px; color:rgb(129, 35, 1)">
            <i>Please Note: You can collect your items at any time
            </i></p>
          <ion-button color="transparent" [disabled]="!delType" (click)="placeOrder()">
            <div *ngIf="delType==='Delivery'"> PLACE ORDER ({{Delivery(getTotal()) | currency:'R'}}) </div>
            <div *ngIf="delType==='Collection'">PLACE ORDER ({{notDelivery(getTotal()) | currency:'R'}})</div>
            <div *ngIf="!delType">PLACE ORDER</div>
          </ion-button>
        </div>
      </div>
    </div>
  </div>
  <!-- Wishlist - Side Menu -->
  <div id="wish" [ngClass]="{'viewwishlist': viewWishlist, 'closewishlist': !viewWishlist}">
    <div class="heading">
      <p> Your Wishlist
      </p>
      <ion-icon slot="icon-only" name="close" (click)="reviewed()"></ion-icon>
    </div>
    <div class="wishlist_items">
      <div class="div">
        <div class="items" *ngFor="let w of myWish; let i = index">
          <ion-checkbox (ionChange)="viewProd(w)"></ion-checkbox>
          <div class="left">
            <div class="img">
              <img src="{{w.data.image}}" alt="">
            </div>

            <div class="item_details">
              <p>{{w.data.name}}<br>{{w.data.price | currency:'R'}} <br> Code: {{w.data.productCode}}</p>
              <p style="color: rgb(77, 1, 1)"><i>{{itemAvailable[i] }}</i></p>
            </div>
          </div>

          <div class="right">
            <div class="trash_icon" (click)="delete(w.id)">
              <ion-icon slot="start" name="trash"></ion-icon>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>

  <!-- Profile - Side Menu -->
  <div id="wish" [ngClass]="{'viewprofile': viewProfile, 'closeprofile': !viewProfile}">
    <div class="heading">
      <p> Profile
      </p>
      <ion-icon slot="icon-only" name="close" (click)="gotoProfile()"></ion-icon>
    </div>

    <div class="profile_details">
      <div class="profile_image">
        <!-- <img src="../../assets/photo-1559740983-b9c5ffbac1ff.jpg"> -->
        <img src="{{profile.image}}" alt="">
      </div>

      <div class="user_details">

        <h1>{{profile.name}}</h1>

        <p>{{profile.email}} <br>
          {{profile.address}} <br>
          {{profile.number}}</p>
      </div>
      <div class="edit_icon" (click)="editInputs()">
        <ion-icon name="create"></ion-icon>
      </div>
    </div>
    <div class="line"></div>

    <div class='inputs' *ngIf="showInputs">
      <ion-input type="text" [(ngModel)]="profile.name" placeholder="Name"></ion-input>
      <ion-input type="text" [(ngModel)]="profile.email" placeholder="Email" readonly></ion-input>
      <ion-input type="text" [(ngModel)]="profile.number" placeholder="Number"></ion-input>
      <ion-input type="text" [(ngModel)]="profile.address" placeholder="Address"></ion-input>
      <ion-input type="file" id="file" (change)="changeListener($event)"></ion-input>
      <div class="button">
        <ion-button id=done color="transparent" (click)="createAccount()">
          DONE
        </ion-button>

        <ion-button id="cancel" color="transparent" (click)="editInputs()">
          CANCEL
        </ion-button>
      </div>
    </div>

    <div class="line"></div>

    <div class="pending_orders">


      <div class="pending_button" (click)="pending()">
        <span *ngIf="!pendingOrders">Pending Orders <ion-icon name="chevron-down-outline"></ion-icon></span>
        <span *ngIf="pendingOrders">Pending Orders <ion-icon name="chevron-up-outline"></ion-icon></span>
      </div>
      <div class="orders" *ngIf="pendingOrders">

        <div class="card" *ngFor="let ord of Allorders; let i = index">
          <div class="img">
            <img src="../../assets/photo-1559740983-b9c5ffbac1ff.jpg" alt="">
          </div>

          <div class="details">
            <p class="code">
              <ion-icon slot="start" name="clipboard"></ion-icon> {{ord.ref}}
            </p>
            <p><span>Date of Purchase:</span> {{ord.info.timestamp | date:"mediumDate"}} <br>
              <span>Delivery Date:</span> 13/08/20
            </p>
            <ion-button (click)="presentModal(ord.ref, pending)">
              Track
            </ion-button>
          </div>
        </div>






      </div>
    </div>

    <div class="order_history">
      <div class="history_button" (click)="history()">
        <p> <span *ngIf="!orderHistory">Order History <ion-icon name="chevron-down-outline"></ion-icon></span>
          <span *ngIf="orderHistory">Order History <ion-icon name="chevron-up-outline"></ion-icon></span>
        </p>

      </div>
      <div class="orders" *ngIf="orderHistory">

        <div class="card" *ngFor="let hstry of History">
          <div class="img">
            <img src="../../assets/photo-1559740983-b9c5ffbac1ff.jpg" alt="">
          </div>

          <div class="details">
            <p class="code">
              <ion-icon slot="start" name="clipboard"></ion-icon>{{hstry.ref}}
            </p>
            <p><span>Date of Purchase:</span> {{hstry.info.dateClosed | date:"mediumDate"}}
            </p>
            <p><span>Delivery Date:</span> 13/08/20</p>

            <ion-button (click)="presentHistory(hstry.ref)">
              View
            </ion-button>
          </div>
        </div>



      </div>
    </div>
    <ion-button id="logout" (click)="logout()">
      SIGN-OUT
    </ion-button>
  </div>
  <div class="container" *ngIf="searchedItems.length>0 && searchtxt!=''">
    <p>Search Results</p>
    <!-- <div class="searched-grid">
      <div class="myCol" *ngFor="let item of searchedItems" (click)='viewDetails(item)'>
        <img [src]='item.image' id="item-image" alt="">
        <p>{{item.name}}</p>
        <p id="rating"><b> {{item.salePrice | currency : 'R'}}</b><b
            id="strike">{{item.price | currency : 'R'}}</b></p>
      </div>
    </div> -->

    <div class="cards">
      <div id="card" *ngFor="let p of searchedItems" (click)="viewProduct(p)">

        <div class="image">
          <img src="{{p.data.image}}" alt="">
        </div>
        <div class="text">
          <p *ngIf="p.data.onSale"> {{p.data.name}} <br>
            <span style="text-decoration: line-through;color: red "> {{ p.data.price | currency:"R"}} </span>
            <span>{{ p.data.salePrice | currency:"R"}}</span></p>

          <p *ngIf="!p.data.onSale"> {{p.data.name}} <br>
            <span>{{p.data.price | currency:"R"}}</span> <br>
            <span class="starz">
              <ion-icon [name]="p.data.avgRating>1 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>2 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>3 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>4 ? 'star' : 'star-outline'"></ion-icon>
              <ion-icon [name]="p.data.avgRating>5 ? 'star' : 'star-outline'"></ion-icon>
            </span>
          </p>

        </div>
      </div>
    </div>
  </div>
  <ion-footer id="webview">
    <div class="footer">
      <div class="heading" routerLink="/home">
        <img src="../../assets/Group 235.png" alt="">
      </div>

      <div class="contact_details">
        <h1>FIND US</h1>
        <p>
          <ion-icon slot="start" name="call"></ion-icon> +27 71 567 3284
        </p>
        <p>
          <ion-icon slot="start" name="mail"></ion-icon> pitsengartsandcrafts.co.za
        </p>

        <p class="address">
          <ion-icon slot="start" name="location"></ion-icon> Soweto Empowerment Zone <br>
          Diepkloof, Chris Hani Road <br>
          SOWETO<br>
          1862
        </p>

      </div>

      <div class="info">
        <h1>QUICK LINKS</h1>
        <ion-button color="transparent" (click)="createFaqs()">
          <span>FAQs</span>
        </ion-button>
        <ion-button color="transparent">
          <span>Terms and Privacy Policy</span>
        </ion-button>
        <ion-button color="transparent">
          <span>Disclaimer</span>
        </ion-button>
        <ion-button (click)="openAboutUS()" color="transparent">
          <span>About Us</span>
        </ion-button>
      </div>

      <div class="connect">
        <h1>CONNECT</h1>
        <ion-button color="transparent">
          <ion-icon slot="start" name="logo-facebook"></ion-icon>
          Facebook
        </ion-button>
        <ion-button color="transparent">
          <ion-icon slot="start" name="logo-instagram"></ion-icon>
          Instagram
        </ion-button>

        <ion-button color="transparent">
          <ion-icon slot="start" name="logo-twitter"></ion-icon>
          Twitter
        </ion-button>
      </div>

      <div class="app_store">
        <img src="../../assets/android.png" alt="App Store">
      </div>

    </div>
    <ion-toolbar color="transparent">
      <ion-title>&copy; Pitseng Arts & Crafts 2020</ion-title>
    </ion-toolbar>
  </ion-footer>

</ion-content>